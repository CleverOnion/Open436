# å…¨å±€æ¶æ„è®¾è®¡æ–‡æ¡£

æœ¬æ–‡ä»¶å¤¹åŒ…å« Open436 è®ºå›ç³»ç»Ÿçš„å…¨å±€æ¶æ„è®¾è®¡æ–‡æ¡£ï¼Œé€‚ç”¨äºæ‰€æœ‰å¾®æœåŠ¡ã€‚

---

## ğŸ“š æ–‡æ¡£åˆ—è¡¨

| æ–‡æ¡£ | è¯´æ˜ | é˜…è¯»æ—¶é—´ |
|------|------|---------|
| [01-å…¨å±€æ¶æ„è®¾è®¡](./01-å…¨å±€æ¶æ„è®¾è®¡.md) | å¾®æœåŠ¡æ¶æ„æ€»è§ˆã€æœåŠ¡åˆ’åˆ†ã€æŠ€æœ¯é€‰å‹ | 30åˆ†é’Ÿ |
| [02-Kongç½‘å…³é…ç½®æŒ‡å—](./02-Kongç½‘å…³é…ç½®æŒ‡å—.md) | Kong éƒ¨ç½²ã€æœåŠ¡æ³¨å†Œã€JWT è®¤è¯é…ç½® | 1å°æ—¶ |
| [03-æœåŠ¡é—´é€šä¿¡è§„èŒƒ](./03-æœåŠ¡é—´é€šä¿¡è§„èŒƒ.md) â­ | æœåŠ¡è°ƒç”¨ã€é‰´æƒé›†æˆï¼ˆé‡ç‚¹ï¼‰ | 2å°æ—¶ |
| [04-APIè®¾è®¡è§„èŒƒ](./04-APIè®¾è®¡è§„èŒƒ.md) | RESTful API è§„èŒƒã€å“åº”æ ¼å¼ | 1å°æ—¶ |
| [05-éƒ¨ç½²è¿ç»´æŒ‡å—](./05-éƒ¨ç½²è¿ç»´æŒ‡å—.md) | Docker/K8s éƒ¨ç½²ã€CI/CD | 1å°æ—¶ |

---

## ğŸ¯ æ¨èé˜…è¯»é¡ºåº

1. **01-å…¨å±€æ¶æ„è®¾è®¡** - ç†è§£æ•´ä½“æ¶æ„
2. **03-æœåŠ¡é—´é€šä¿¡è§„èŒƒ** - æŒæ¡æœåŠ¡è°ƒç”¨å’Œé‰´æƒï¼ˆæœ€é‡è¦ï¼‰
3. **02-Kongç½‘å…³é…ç½®æŒ‡å—** - äº†è§£ç½‘å…³é…ç½®
4. **04-APIè®¾è®¡è§„èŒƒ** - å­¦ä¹  API æ ‡å‡†
5. **05-éƒ¨ç½²è¿ç»´æŒ‡å—** - æ­å»ºå¼€å‘ç¯å¢ƒ

---

## ğŸ’¡ æ ¸å¿ƒè¦ç‚¹

### æœåŠ¡é—´å¦‚ä½•é€šä¿¡ï¼Ÿ

**å¿…é¡»é€šè¿‡ Kong ç½‘å…³**ï¼Œä½¿ç”¨å°è£…å¥½çš„ `ServiceClient`ï¼š

```javascript
const serviceClient = require('./utils/serviceClient');

// è°ƒç”¨ç”¨æˆ·æœåŠ¡
const user = await serviceClient.get('/api/users/123');
```

### å¦‚ä½•è·å–å½“å‰ç™»å½•ç”¨æˆ·ï¼Ÿ

**ä» Kong æ³¨å…¥çš„ Header è·å–**ï¼ˆæ¨èï¼‰ï¼š

```javascript
const userId = req.headers['x-jwt-claim-sub'];
const username = req.headers['x-jwt-claim-username'];
const role = req.headers['x-jwt-claim-role'];
```

### å¦‚ä½•éªŒè¯ç”¨æˆ·æƒé™ï¼Ÿ

```javascript
// æ£€æŸ¥æ˜¯å¦ä¸ºç®¡ç†å‘˜
if (role !== 'admin') {
  return res.status(403).json({ error: 'Forbidden' });
}

// æ£€æŸ¥æ˜¯å¦ä¸ºæœ¬äºº
if (userId !== targetUserId && role !== 'admin') {
  return res.status(403).json({ error: 'Forbidden' });
}
```

---

**è¿”å›**: [TDD ä¸»ç›®å½•](../README.md)

# 页面结构设计文档

## 文档说明

本文档基于《需求文档.md》，详细列出实现所有功能所需的页面结构，包括用户端和管理端页面。

---

## 页面分类

### 用户端页面（普通用户 + 管理员）
用户端页面供所有登录用户访问，包含论坛核心功能。

### 管理端页面（仅管理员）
管理端页面仅管理员可访问，用于用户管理和内容管理。

---

## 一、用户端页面

### 1. 登录页面 `/login`

**功能需求来源：** 1.1 用户登录

**页面元素：**
- 用户名输入框
- 密码输入框
- "记住我"复选框（7天）
- 登录按钮
- 登录失败错误提示

**交互逻辑：**
- 提交登录表单
- 验证用户名和密码
- 登录成功后跳转到首页
- 登录失败显示错误信息（次数限制提示）

**路由：** `/login`

---

### 2. 首页（帖子时间线）`/` 或 `/home`

**功能需求来源：** 2.2 帖子浏览

**页面元素：**
- 顶部导航栏（Logo、首页、搜索、用户菜单）
- 发帖按钮（跳转到发帖页面）
- 帖子列表（流式展示）
  - 每个帖子卡片显示：
    - 标题
    - 作者头像和昵称
    - 发布时间
    - 内容预览（前200字）
    - 回复数、浏览量
    - 点赞数
    - 置顶标识（如有）
- 分页/无限滚动加载

**交互逻辑：**
- 点击帖子卡片跳转到帖子详情页
- 点击作者跳转到用户主页
- 滚动加载更多帖子

**路由：** `/` 或 `/home`

---

### 3. 发帖页面 `/post/new`

**功能需求来源：** 2.1 帖子发布

**页面元素：**
- 标题输入框
- Markdown编辑器
  - 工具栏（加粗、斜体、代码块、图片上传等）
  - 编辑区域
  - 实时预览区域
- 图片上传按钮（支持拖拽上传）
- 发布按钮
- 取消按钮

**交互逻辑：**
- 实时Markdown预览
- 图片上传（限制5MB，jpg/png/gif）
- 代码块语法高亮
- 提交发布
- 发布成功后跳转到帖子详情页

**路由：** `/post/new`

---

### 4. 帖子详情页 `/post/:id`

**功能需求来源：** 2.3 帖子详情、2.4 回复功能、2.5 互动功能

**页面元素：**
- 顶部导航栏
- 帖子主体内容
  - 标题
  - 作者信息（头像、昵称、发布时间）
  - 正文内容（Markdown渲染）
  - 代码块（语法高亮 + 一键复制按钮）
  - 图片（点击放大预览）
  - 浏览量统计
  - 互动按钮区：
    - 点赞按钮（显示点赞数）
    - 收藏按钮
    - 编辑按钮（作者本人可见）
    - 删除按钮（作者/管理员可见）
    - 置顶按钮（管理员可见）
- 回复列表
  - 楼层号
  - 回复者信息
  - 回复内容（Markdown渲染）
  - 回复时间
  - 编辑按钮（5分钟内，作者可见）
  - 删除按钮（作者/管理员可见）
- 回复输入框（底部固定）
  - Markdown编辑器（简化版）
  - 提交回复按钮

**交互逻辑：**
- 点赞/取消点赞
- 收藏/取消收藏
- 发布回复
- 编辑回复（5分钟内）
- 删除回复
- 图片点击放大（模态框）
- 代码块一键复制

**路由：** `/post/:id`

---

### 5. 编辑帖子页面 `/post/:id/edit`

**功能需求来源：** 2.7 内容管理（用户可编辑自己的帖子）

**页面元素：**
- 与发帖页面相同的编辑器
- 预填充原帖子内容
- 保存按钮
- 取消按钮

**交互逻辑：**
- 加载原帖子数据
- 编辑并保存
- 保存成功后跳转回帖子详情页

**权限：** 仅作者本人或管理员可访问

**路由：** `/post/:id/edit`

---

### 6. 搜索页面 `/search`

**功能需求来源：** 2.6 搜索功能

**页面元素：**
- 搜索输入框
- 筛选选项：
  - 按作者筛选（下拉选择或输入）
- 搜索结果列表（与首页帖子列表样式相同）
- 分页

**交互逻辑：**
- 输入关键词搜索（标题+内容）
- 按作者筛选
- 显示搜索结果
- 点击结果跳转到帖子详情

**路由：** `/search?q=关键词&author=作者`

---

### 7. 个人主页 `/user/:id`

**功能需求来源：** 1.4 个人主页

**页面元素：**
- 用户基本信息
  - 头像
  - 昵称
  - 个人简介
  - 注册时间
- 统计信息
  - 发帖数量
  - 回复数量
- 选项卡切换：
  - 发帖历史（帖子列表）
  - 回复历史（回复列表，显示所属帖子）
- 编辑资料按钮（本人可见）

**交互逻辑：**
- 查看用户发帖和回复历史
- 点击帖子跳转到详情页
- 点击编辑资料跳转到编辑资料页

**路由：** `/user/:id`

---

### 8. 编辑个人资料页面 `/user/profile/edit`

**功能需求来源：** 1.3 个人资料管理

**页面元素：**
- 头像上传
- 昵称输入框
- 个人简介输入框（多行文本）
- 保存按钮
- 取消按钮

**交互逻辑：**
- 上传并预览头像
- 编辑昵称和简介
- 保存修改

**权限：** 仅本人可访问

**路由：** `/user/profile/edit`

---

### 9. 修改密码页面 `/user/password/change`

**功能需求来源：** 1.3 个人资料管理

**页面元素：**
- 当前密码输入框
- 新密码输入框
- 确认新密码输入框
- 提交按钮
- 取消按钮

**交互逻辑：**
- 验证当前密码
- 验证新密码强度
- 确认两次输入一致
- 修改成功后提示并退出登录

**权限：** 仅本人可访问

**路由：** `/user/password/change`

---

### 10. 我的收藏页面 `/user/favorites`

**功能需求来源：** 2.5 互动功能（收藏帖子）

**页面元素：**
- 收藏的帖子列表（与首页样式相同）
- 取消收藏按钮
- 分页

**交互逻辑：**
- 显示用户收藏的所有帖子
- 点击帖子跳转到详情页
- 取消收藏

**权限：** 仅本人可访问

**路由：** `/user/favorites`

---

## 二、管理端页面

### 11. 管理后台首页 `/admin` 或 `/admin/dashboard`

**功能需求来源：** 管理员功能入口

**页面元素：**
- 侧边栏导航菜单：
  - 用户管理
  - 内容管理
  - 系统日志
- 统计面板（可选）：
  - 用户总数
  - 帖子总数
  - 今日活跃用户
  - 今日新增帖子

**交互逻辑：**
- 点击菜单切换不同管理页面

**权限：** 仅管理员可访问

**路由：** `/admin` 或 `/admin/dashboard`

---

### 12. 用户管理页面 `/admin/users`

**功能需求来源：** 1.5 用户管理（管理员功能）

**页面元素：**
- 创建新用户按钮
- 用户列表表格：
  - 用户ID
  - 用户名
  - 昵称
  - 角色（普通用户/管理员）
  - 状态（启用/禁用）
  - 注册时间
  - 操作按钮：
    - 编辑
    - 重置密码
    - 禁用/启用
    - 删除（可选）
- 搜索/筛选功能
- 分页

**交互逻辑：**
- 创建新用户（弹窗或跳转到创建页面）
- 编辑用户信息
- 重置用户密码
- 禁用/启用用户账号
- 分配用户角色

**权限：** 仅管理员可访问

**路由：** `/admin/users`

---

### 13. 创建用户页面 `/admin/users/new`

**功能需求来源：** 1.5 用户管理（创建新用户账号）

**页面元素：**
- 用户名输入框
- 初始密码输入框
- 昵称输入框
- 角色选择（普通用户/管理员）
- 创建按钮
- 取消按钮

**交互逻辑：**
- 填写用户信息
- 验证用户名唯一性
- 创建用户
- 创建成功后返回用户管理页面

**权限：** 仅管理员可访问

**路由：** `/admin/users/new`

---

### 14. 编辑用户页面 `/admin/users/:id/edit`

**功能需求来源：** 1.5 用户管理（编辑用户信息）

**页面元素：**
- 用户名（只读）
- 昵称输入框
- 角色选择（普通用户/管理员）
- 状态选择（启用/禁用）
- 保存按钮
- 取消按钮

**交互逻辑：**
- 加载用户信息
- 编辑并保存
- 保存成功后返回用户管理页面

**权限：** 仅管理员可访问

**路由：** `/admin/users/:id/edit`

---

### 15. 内容管理页面 `/admin/posts`

**功能需求来源：** 2.7 内容管理（管理员功能）

**页面元素：**
- 帖子列表表格：
  - 帖子ID
  - 标题
  - 作者
  - 发布时间
  - 回复数
  - 浏览量
  - 状态（正常/置顶）
  - 操作按钮：
    - 查看
    - 置顶/取消置顶
    - 删除
- 搜索/筛选功能
- 分页

**交互逻辑：**
- 查看帖子详情
- 置顶/取消置顶帖子
- 删除帖子（需确认）
- 批量操作（可选）

**权限：** 仅管理员可访问

**路由：** `/admin/posts`

---

### 16. 回复管理页面 `/admin/replies`

**功能需求来源：** 2.7 内容管理（删除任意回复）

**页面元素：**
- 回复列表表格：
  - 回复ID
  - 所属帖子
  - 回复者
  - 回复内容（摘要）
  - 回复时间
  - 操作按钮：
    - 查看
    - 删除
- 搜索/筛选功能
- 分页

**交互逻辑：**
- 查看回复详情（跳转到帖子详情页对应楼层）
- 删除回复（需确认）

**权限：** 仅管理员可访问

**路由：** `/admin/replies`

---

### 17. 系统日志页面 `/admin/logs`（可选）

**功能需求来源：** 非功能性需求（异常日志记录）

**页面元素：**
- 日志列表表格：
  - 时间
  - 操作类型
  - 操作用户
  - 操作内容
  - IP地址
- 筛选功能（按时间、用户、操作类型）
- 分页

**交互逻辑：**
- 查看系统操作日志
- 筛选和搜索日志

**权限：** 仅管理员可访问

**路由：** `/admin/logs`

---

## 三、公共组件/模块

### 1. 顶部导航栏组件

**出现位置：** 所有用户端页面

**元素：**
- Logo（点击返回首页）
- 搜索框（快速搜索）
- 导航菜单：
  - 首页
  - 我的收藏
- 用户菜单（下拉）：
  - 个人主页
  - 编辑资料
  - 修改密码
  - 管理后台（管理员可见）
  - 退出登录

---

### 2. 侧边栏组件（管理端）

**出现位置：** 所有管理端页面

**元素：**
- 管理后台标题
- 导航菜单：
  - 仪表盘
  - 用户管理
  - 内容管理
  - 回复管理
  - 系统日志
- 返回用户端按钮

---

### 3. Markdown编辑器组件

**出现位置：** 发帖页面、编辑帖子页面、回复输入框

**功能：**
- 实时预览
- 工具栏（加粗、斜体、代码块、图片上传等）
- 代码语法高亮
- 图片上传

---

### 4. 图片预览模态框组件

**出现位置：** 帖子详情页

**功能：**
- 点击图片全屏显示
- 点击背景或关闭按钮关闭

---

### 5. 确认对话框组件

**出现位置：** 删除操作、重置密码等需要确认的操作

**功能：**
- 显示确认信息
- 确认/取消按钮

---

## 四、页面路由汇总

### 用户端路由

| 路由 | 页面名称 | 权限 |
|------|---------|------|
| `/login` | 登录页面 | 公开 |
| `/` 或 `/home` | 首页（帖子时间线） | 需登录 |
| `/post/new` | 发帖页面 | 需登录 |
| `/post/:id` | 帖子详情页 | 需登录 |
| `/post/:id/edit` | 编辑帖子页面 | 作者/管理员 |
| `/search` | 搜索页面 | 需登录 |
| `/user/:id` | 个人主页 | 需登录 |
| `/user/profile/edit` | 编辑个人资料页面 | 本人 |
| `/user/password/change` | 修改密码页面 | 本人 |
| `/user/favorites` | 我的收藏页面 | 本人 |

### 管理端路由

| 路由 | 页面名称 | 权限 |
|------|---------|------|
| `/admin` 或 `/admin/dashboard` | 管理后台首页 | 仅管理员 |
| `/admin/users` | 用户管理页面 | 仅管理员 |
| `/admin/users/new` | 创建用户页面 | 仅管理员 |
| `/admin/users/:id/edit` | 编辑用户页面 | 仅管理员 |
| `/admin/posts` | 内容管理页面 | 仅管理员 |
| `/admin/replies` | 回复管理页面 | 仅管理员 |
| `/admin/logs` | 系统日志页面 | 仅管理员 |

---

## 五、页面数量统计

### 用户端页面：10个
1. 登录页面
2. 首页（帖子时间线）
3. 发帖页面
4. 帖子详情页
5. 编辑帖子页面
6. 搜索页面
7. 个人主页
8. 编辑个人资料页面
9. 修改密码页面
10. 我的收藏页面

### 管理端页面：7个
1. 管理后台首页
2. 用户管理页面
3. 创建用户页面
4. 编辑用户页面
5. 内容管理页面
6. 回复管理页面
7. 系统日志页面

### 公共组件：5个
1. 顶部导航栏组件
2. 侧边栏组件（管理端）
3. Markdown编辑器组件
4. 图片预览模态框组件
5. 确认对话框组件

**总计：17个独立页面 + 5个公共组件**

---

## 六、页面间跳转关系

```
登录页面 ──登录成功──> 首页

首页
├─> 发帖页面 ──发布成功──> 帖子详情页
├─> 帖子详情页
│   ├─> 编辑帖子页面 ──保存──> 帖子详情页
│   └─> 个人主页（点击作者）
├─> 搜索页面 ──搜索结果──> 帖子详情页
├─> 个人主页（点击用户菜单）
│   ├─> 编辑个人资料页面 ──保存──> 个人主页
│   └─> 修改密码页面 ──修改成功──> 登录页面
├─> 我的收藏页面 ──点击帖子──> 帖子详情页
└─> 管理后台首页（管理员）

管理后台首页
├─> 用户管理页面
│   ├─> 创建用户页面 ──创建成功──> 用户管理页面
│   └─> 编辑用户页面 ──保存──> 用户管理页面
├─> 内容管理页面 ──查看帖子──> 帖子详情页
├─> 回复管理页面 ──查看回复──> 帖子详情页
└─> 系统日志页面
```

---

## 七、开发优先级建议

### 第一优先级（核心功能）
1. 登录页面
2. 首页（帖子时间线）
3. 帖子详情页
4. 发帖页面
5. 顶部导航栏组件
6. Markdown编辑器组件

### 第二优先级（用户功能）
7. 个人主页
8. 编辑个人资料页面
9. 修改密码页面
10. 编辑帖子页面
11. 我的收藏页面
12. 搜索页面

### 第三优先级（管理功能）
13. 管理后台首页
14. 用户管理页面
15. 创建用户页面
16. 编辑用户页面
17. 内容管理页面

### 第四优先级（扩展功能）
18. 回复管理页面
19. 系统日志页面
20. 其他公共组件优化

---

**文档版本：** v1.0  
**创建日期：** 2025-10-22  
**基于需求文档：** v2.0 (MVP版本)  
**总页面数：** 17个独立页面 + 5个公共组件
